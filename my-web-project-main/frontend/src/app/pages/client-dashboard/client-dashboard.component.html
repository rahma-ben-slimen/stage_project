<div class="client-dashboard">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <h1>Mon Espace Client</h1>
      <div class="user-info">
        <span class="welcome">Bienvenue, {{ user?.prenom || 'Client' }}</span>
        <button class="btn-logout" (click)="logout()">DÃ©connexion</button>
      </div>
    </div>
  </header>

  <div class="dashboard-content">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">{{ stats.totalProjects }}</div>
        <div class="stat-label">Projets</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ stats.pendingProjects }}</div>
        <div class="stat-label">En attente</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ stats.inProgressProjects }}</div>
        <div class="stat-label">En cours</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ stats.completedProjects }}</div>
        <div class="stat-label">TerminÃ©s</div>
      </div>
    </div>

    <!-- Actions Rapides -->
    <div class="quick-actions">
      <h2>Actions Rapides</h2>
      <div class="actions-grid">
        <button class="action-btn" routerLink="/devis">
          <span class="icon">â•</span>
          <span class="text">Nouveau Devis</span>
        </button>
        <button class="action-btn" (click)="refreshProjects()">
          <span class="icon">ğŸ”„</span>
          <span class="text">RafraÃ®chir</span>
        </button>
        <button class="action-btn" (click)="contactSupport()">
          <span class="icon">ğŸ“</span>
          <span class="text">Support</span>
        </button>
      </div>
    </div>

    <!-- Mes Projets -->
    <div class="projects-section">
      <div class="section-header">
        <h2>Mes Projets ({{ projects.length }})</h2>
        <button class="btn-refresh" (click)="refreshProjects()" title="RafraÃ®chir">
          ğŸ”„
        </button>
      </div>

      @if (isLoading) {
        <div class="loading">
          â³ Chargement de vos projets...
        </div>
      }

      @if (projects.length > 0) {
        <div class="projects-grid">
          @for (project of projects; track project.id) {
            <div class="project-card" [ngClass]="getStatusClass(project.status)">
              <div class="project-header">
                <h3>{{ project.projectType | titlecase }}</h3>
                <span class="project-status">{{ getStatusText(project.status) }}</span>
              </div>
              
              <div class="project-info">
                <p><strong>ğŸ“ Adresse:</strong> {{ project.projectAddress }}</p>
                <p><strong>ğŸ“ Surface:</strong> {{ project.surface }} mÂ²</p>
                <p><strong>ğŸ’° Budget:</strong> {{ project.budget || 'Non dÃ©fini' }}</p>
                <p><strong>ğŸ“… Date:</strong> {{ project.createdAt | date:'dd/MM/yyyy' }}</p>
              </div>
              
              <div class="project-description">
                <p>{{ project.description || 'Aucune description' | slice:0:100 }}...</p>
              </div>
              
              <div class="project-actions">
                <button class="btn-view" (click)="viewProjectDetails(project)">
                  Voir dÃ©tails
                </button>
              </div>
            </div>
          }
        </div>
      } @else if (!isLoading) {
        <div class="no-projects">
          <p>ğŸ“­ Vous n'avez pas encore de projet</p>
          <button class="btn-primary" routerLink="/devis">
            CrÃ©er mon premier projet
          </button>
        </div>
      }
    </div>
  </div>
</div>